name: Sphinx docs to gh-pages
on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9

    - name: Install dependencies
      run: |
        pip install setuptools setuptools_scm importlib-resources Sphinx==3.2.1 rinohtype ipython sphinx_rtd_theme sphinx_autodoc_typehints recommonmark mkdocs sphinx_bootstrap_theme sphinx-markdown-parser pymdown-extensions m2r2 ytsphinx python-dotenv pycryptodomex pyyaml nbsphinx pandoc pandocfilters yolk3k


    - name: Generate documentation
      run: |
        cd docs
        make html

    - name: Commit and push changes
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: "Generate Documentation"
        push: true
        branch: gh-pages
